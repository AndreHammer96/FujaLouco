<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <link rel="icon" href="/static/imagens/logo.png" type="image/png">
  <meta charset="UTF-8">
  <title>MAPA TCHA</title>
  <link rel="stylesheet" href="/static/leaflet/leaflet.css">
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <header>
    <h1>
      <img src="/static/imagens/logo2.png" alt="Logo">
      MAPA PROS ENIGMAS
    </h1>
  </header>

  <button id="toggle-menu">‚úñ</button> <!-- bot√£o aqui, fora do aside -->

  <main>
    <aside>
      <!-- üîç Campo de filtro com bot√£o de limpar -->
      <div style="position: relative; display: flex; align-items: center;">
        <div style="position: relative; width: 80%;">
          <input type="text" id="filtro" placeholder="Buscar refer√™ncia..." style="width: 75%; padding-right: 30px;">
          <button id="limpar-filtro" style="
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            font-size: 13px;
            cursor: pointer;
            display: none;
            color: #666;
          ">‚ùå</button>
        </div>
      </div>
      <ul id="lista-referencias">
        <!-- preenchido via script.js -->
      </ul>
    </aside>

    <div id="map"></div>
  </main>

  <script src="/static/leaflet/leaflet.js"></script>
  <script src="/static/script.js"></script>
  <div id="centralizar-btn" title="Centralizar no local atual">üìç</div>

  <script>
    let posicaoAtual = null;

    navigator.geolocation.watchPosition(
      (position) => {
        posicaoAtual = [position.coords.latitude, position.coords.longitude];
      },
      (error) => {
        console.error('Erro ao rastrear localiza√ß√£o:', error);
      },
      {
        enableHighAccuracy: false,
        timeout: 20000,
        maximumAge: 0
      }
    );

    document.getElementById('centralizar-btn').addEventListener('click', () => {
      if (posicaoAtual) {
        mapa.setView(posicaoAtual, 17);
      } else {
        alert('Ainda n√£o foi poss√≠vel obter sua localiza√ß√£o. Tente novamente em alguns segundos.');
      }
    });
  </script>
</body>
</html>
